# VRChairPlugin
Данный плагин написан для движка Unreal Engine 4.

Плагин позволяет достучаться до VR кресла и указывать ему направления наклона.


## Установка плагина
### 1. Создаем папку Plugins в корне проекта UE4

![Create folder Plugins](https://c.radikal.ru/c14/1804/a3/e832badd495a.png)

### 2. Клонируем репозиторий в папку Plugins.

**ОБЯЗАТЕЛЬНО** ***оставляем название папки таким же, как название репозитория!!!***

![Clone rep](https://c.radikal.ru/c41/1804/9b/07e2dae7d3a0.png)

### 3. Запускаем проект

При первом запуске появится окно с просьбо скомпилить плагин. Нажимаем "Да".

![Compil plug](https://d.radikal.ru/d37/1804/75/5f52d46cb5b7.png)

Если все пошло "по плану", то проект должен запуститься и плагин должен работать =)
*******************************************************************************
#### Если проект скомпилился, но плагин не появился, проверьте включен ли плагин:

Нужно зайти в `Setting->Plugins->Project->Virtual Reality`и поставить галку напротив `Enabled`и перезапустить проект.

![On Plugin](https://c.radikal.ru/c16/1804/12/25b2f9743e1c.png)

*************************************************************

## Blueprint_API

![On Plugin](https://c.radikal.ru/c35/1804/a0/57fafddd6ee8.png)

### 1. Serial Port

На вход подается номер COMPort, к которому подключено кресло.
***P.S Если вы будете тестировать приложение на компе, который прилагался к креслу, то ставьте `6`***

На выход подается `bool` переменная с проверкой на подключение к порту и переменная объекта, с помощью которой производятся остальные манипуляции.

### 2. Is Connected

На вход подается переменная объекта, а на выход `bool` с проверкой на подключение к порту.

### 3. Control

Функция, которая принимает в себя параметры `X (Roll - вправо\влево)`, `Y (Pitch - вперед\назад)` и переменную объекта.

В данной функции указываются параметры для указанию креслу, куда производить наклон.

### 4. Float Pitch\Roll

По сути тоже самое, что и функция Control, но можно по отдельности менять параметры `X` и `Y`.

### 5. Start Sending

Функция, которая переобразует заданные `float` параметры в форму параметров, которая отправляется в кресло.

На вход подается переменная объекта и `float` параметром со временем отработки данной функции.

Так как в кресло надо подавать раз в 0.1 сек параметры, чтобы оно фиксировано стояло в нужной точке, был реализован таймер.

***P.S если указать `Time = 0.0` или `0 > Time` то функция будет работать бесконечно =)***

### 6. Close Port

Функция, которую надо, **как минимум**, указывать в `Event End Play`, чтобы при завершении работы `Actor`, порт закрылся и при следующем запуске можно было до него достучаться.

### 7. Port Write & Float to Bytes

Данные функции были написаны для Debug кресла, чтобы вручную отправлять ему байты.

***В скором времени их не будет, так как они не нужны***
